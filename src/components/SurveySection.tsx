// Custom Radio SVGs
const RadioOff = () => (
  <svg width="32" height="28" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="6" width="45" height="48" rx="22.5" fill="white"/>
    <rect x="12" y="40" width="30" height="4" fill="white"/>
    <rect x="8" y="36" width="4" height="4" fill="white"/>
    <rect width="30" height="4" transform="matrix(1 0 0 -1 12 8)" fill="white"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 8 12)" fill="white"/>
    <rect x="4" y="12" width="10" height="24" fill="white"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="#B37B0D"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 36)" fill="white"/>
    <rect x="46" y="8" width="4" height="4" transform="rotate(180 46 8)" fill="#E5C179"/>
    <rect x="48" y="12" width="6" height="4" transform="rotate(180 48 12)" fill="white"/>
    <rect width="10" height="24" transform="matrix(-1 0 0 1 52 12)" fill="white"/>
    <rect x="12" width="30" height="4" fill="black"/>
    <rect x="12" y="44" width="30" height="4" fill="black"/>
    <rect x="8" y="40" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="black"/>
    <rect x="8" y="4" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 4)" fill="black"/>
    <rect x="4" y="36" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 36)" fill="black"/>
    <rect x="4" y="8" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 8)" fill="black"/>
    <rect y="12" width="4" height="24" fill="black"/>
    <rect width="4" height="24" transform="matrix(-1 0 0 1 54 12)" fill="black"/>
  </svg>
);

const RadioOn = () => (
  <svg width="32" height="28" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="6" width="45" height="48" rx="22.5" fill="#D0941C"/>
    <rect x="12" y="40" width="30" height="4" fill="#B37B0D"/>
    <rect x="8" y="36" width="4" height="4" fill="#B37B0D"/>
    <rect width="30" height="4" transform="matrix(1 0 0 -1 12 8)" fill="#E5C179"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 8 12)" fill="#E5C179"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 42 12)" fill="#E5C179"/>
    <rect x="4" y="12" width="10" height="24" fill="#D0941C"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="#B37B0D"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 36)" fill="#B37B0D"/>
    <rect x="46" y="8" width="4" height="4" transform="rotate(180 46 8)" fill="#E5C179"/>
    <rect width="10" height="24" transform="matrix(-1 0 0 1 52 12)" fill="#D0941C"/>
    <rect x="12" width="30" height="4" fill="black"/>
    <rect x="12" y="44" width="30" height="4" fill="black"/>
    <rect x="8" y="40" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="black"/>
    <rect x="8" y="4" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 4)" fill="black"/>
    <rect x="4" y="36" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 36)" fill="black"/>
    <rect x="4" y="8" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 8)" fill="black"/>
    <rect y="12" width="4" height="24" fill="black"/>
    <rect width="4" height="24" transform="matrix(-1 0 0 1 54 12)" fill="black"/>
    <path d="M36.9998 14H40.3332V17.3333H36.9998V14ZM33.6665 20.6667V17.3333H36.9998V20.6667H33.6665ZM30.3332 24V20.6667H33.6665V24H30.3332ZM26.9998 27.3333H30.3332V24H26.9998V27.3333ZM23.6665 30.6667H26.9998V27.3333H23.6665V30.6667ZM20.3332 30.6667V34H23.6665V30.6667H20.3332ZM16.9998 27.3333H20.3332V30.6667H16.9998V27.3333ZM16.9998 27.3333H13.6665V24H16.9998V27.3333Z" fill="black"/>
  </svg>
);
// Custom Checkbox SVGs
const CheckboxOff = () => (
  <svg width="32" height="28" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="6" width="45" height="48" rx="22.5" fill="white"/>
    <rect x="12" y="40" width="30" height="4" fill="white"/>
    <rect x="8" y="36" width="4" height="4" fill="white"/>
    <rect width="30" height="4" transform="matrix(1 0 0 -1 12 8)" fill="white"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 8 12)" fill="white"/>
    <rect x="4" y="12" width="10" height="24" fill="white"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="#B37B0D"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 36)" fill="white"/>
    <rect x="46" y="8" width="4" height="4" transform="rotate(180 46 8)" fill="#E5C179"/>
    <rect x="48" y="12" width="6" height="4" transform="rotate(180 48 12)" fill="white"/>
    <rect width="10" height="24" transform="matrix(-1 0 0 1 52 12)" fill="white"/>
    <rect x="12" width="30" height="4" fill="black"/>
    <rect x="12" y="44" width="30" height="4" fill="black"/>
    <rect x="8" y="40" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="black"/>
    <rect x="8" y="4" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 4)" fill="black"/>
    <rect x="4" y="36" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 36)" fill="black"/>
    <rect x="4" y="8" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 8)" fill="black"/>
    <rect y="12" width="4" height="24" fill="black"/>
    <rect width="4" height="24" transform="matrix(-1 0 0 1 54 12)" fill="black"/>
  </svg>
);

const CheckboxOn = () => (
  <svg width="32" height="28" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="6" width="45" height="48" rx="22.5" fill="#D0941C"/>
    <rect x="12" y="40" width="30" height="4" fill="#B37B0D"/>
    <rect x="8" y="36" width="4" height="4" fill="#B37B0D"/>
    <rect width="30" height="4" transform="matrix(1 0 0 -1 12 8)" fill="#E5C179"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 8 12)" fill="#E5C179"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 42 12)" fill="#E5C179"/>
    <rect x="4" y="12" width="10" height="24" fill="#D0941C"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="#B37B0D"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 36)" fill="#B37B0D"/>
    <rect x="46" y="8" width="4" height="4" transform="rotate(180 46 8)" fill="#E5C179"/>
    <rect width="10" height="24" transform="matrix(-1 0 0 1 52 12)" fill="#D0941C"/>
    <rect x="12" width="30" height="4" fill="black"/>
    <rect x="12" y="44" width="30" height="4" fill="black"/>
    <rect x="8" y="40" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 40)" fill="black"/>
    <rect x="8" y="4" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 46 4)" fill="black"/>
    <rect x="4" y="36" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 36)" fill="black"/>
    <rect x="4" y="8" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 50 8)" fill="black"/>
    <rect y="12" width="4" height="24" fill="black"/>
    <rect width="4" height="24" transform="matrix(-1 0 0 1 54 12)" fill="black"/>
    <rect x="21" y="12" width="12" height="4" fill="black"/>
    <rect x="17" y="16" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 37 16)" fill="black"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 17 32)" fill="black"/>
    <rect x="37" y="32" width="4" height="4" transform="rotate(180 37 32)" fill="black"/>
    <rect x="13" y="20" width="4" height="4" fill="black"/>
    <rect width="4" height="4" transform="matrix(-1 0 0 1 41 20)" fill="black"/>
    <rect width="4" height="4" transform="matrix(1 0 0 -1 13 28)" fill="black"/>
    <rect x="41" y="28" width="4" height="4" transform="rotate(180 41 28)" fill="black"/>
    <rect x="21" y="32" width="12" height="4" fill="black"/>
    <path d="M21 20V16H33V20H37V28H33V32H21V28H17V20H21Z" fill="white"/>
  </svg>
);
import React, { useState, useMemo } from 'react';
import { supabase } from '../lib/supabase';
import Image from 'next/image';
import { useRouter } from 'next/navigation';
import PreviousButton from './PreviousButton';
import NextButton from './NextButton';
import SubmitButton from './SubmitButton';
import ShareTwitterButton from './ShareTwitterButton';
import JoinDiscordButton from './JoinDiscordButton';
import BackButton from './BackButton';

const questions = [
  {
    label: "How many gaming platforms/accounts do you actively use?",
    type: "radio",
    name: "platform_count",
    options: [
      "1-2 platforms",
      "3-4 platforms",
      "5-6 platforms",
      "7+ platforms",
      "I don't track this"
    ],
  },
  {
    label: "How frustrated are you with creating new accounts for each game you play?",
    type: "radio",
    name: "account_frustration",
    options: [
      "Very frustrated - I hate it",
      "Somewhat frustrated - It's annoying but manageable",
      "Neutral - Doesn't bother me much",
      "Not frustrated - I'm fine with it",
      "I enjoy having separate accounts"
    ],
  },
  {
    label: "Would you use a single login (like \"Login with Gaming ID\") that works across all your games?",
    type: "radio",
    name: "single_login",
    options: [
      "Definitely yes - I'd use it immediately",
      "Probably yes - Sounds convenient",
      "Maybe - Depends on how it works",
      "Probably not - I prefer separate accounts",
      "Definitely not - Privacy/security concerns"
    ],
  },
  {
    label: "How important is it for you to showcase ALL your gaming achievements in one place?",
    type: "radio",
    name: "achievement_showcase",
    options: [
      "Very important - I'd love to show off my complete gaming history",
      "Somewhat important - Would be nice to have",
      "Neutral - Don't really care either way",
      "Not very important - Achievements don't matter to me",
      "Not important at all - I don't care about achievements"
    ],
  },
  {
    label: "Would you pay $5-10/month for a premium gaming profile that aggregates all your achievements and provides AI-powered gaming insights?",
    type: "radio",
    name: "premium_willingness",
    options: [
      "Yes, I'd definitely pay for this",
      "Maybe, if the features are compelling enough",
      "Unsure - Need to see it first",
      "Probably not - Seems too expensive",
      "No, I wouldn't pay for this"
    ],
  },
  {
    label: "Would you use a cross-game reputation system that helps identify and avoid cheaters and toxic players?",
    type: "radio",
    name: "reputation_system",
    options: [
      "Yes, definitely - Cheaters and toxic players ruin my experience",
      "Yes, sounds helpful for better matchmaking",
      "Maybe - Depends on how it works",
      "Probably not - I'm concerned about fairness",
      "No - I don't think reputation systems work"
    ],
  },
  {
    label: "Are you familiar with Decentralized Identity (DID) or blockchain-based identity systems?",
    type: "radio",
    name: "blockchain_familiarity",
    options: [
      "Yes, I understand and use blockchain/DID technology",
      "Yes, I've heard of it but don't fully understand it",
      "Somewhat familiar - Know the basics",
      "Not really - Heard the terms but unclear what they mean",
      "No, I have no idea what these are"
    ],
  },
  {
    label: "Would you trust a gaming identity system built on blockchain that gives you ownership and control of your gaming data?",
    type: "radio",
    name: "blockchain_trust",
    options: [
      "Yes, I prefer blockchain-based systems for data ownership",
      "Yes, if it's easy to use and secure",
      "Maybe - Need to understand the benefits better",
      "Probably not - Blockchain seems complicated",
      "No - I don't trust blockchain technology"
    ],
  },
  {
    label: "Enter your email to stay updated on OriginForge*",
    type: "email",
    name: "email",
  },
  {
    label: "",
    type: "discord",
    name: "discord",
  },
];

const SurveySection: React.FC = () => {
  // Helper to submit answers to Supabase
  const [showShareCard, setShowShareCard] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [notification, setNotification] = useState<{type: 'success' | 'error', message: string} | null>(null);

  const showNotification = (type: 'success' | 'error', message: string) => {
    setNotification({ type, message });
    setTimeout(() => setNotification(null), 5000);
  };

  const submitSurvey = async () => {
    setIsSubmitting(true);
    try {
      // Prepare complete payload with all collected answers
      const payload = {
        platform_count: answers.platform_count,
        account_frustration: answers.account_frustration,
        single_login: answers.single_login,
        achievement_showcase: answers.achievement_showcase,
        premium_willingness: answers.premium_willingness,
        reputation_system: answers.reputation_system,
        blockchain_familiarity: answers.blockchain_familiarity,
        blockchain_trust: answers.blockchain_trust,
        // Always collect email
        email: answers.email,
        submitted_at: new Date().toISOString()
      };

      console.log('Submitting payload:', payload);
      const { error } = await supabase.from('new_survey_responses').insert([payload]);
      if (error) {
        showNotification('error', `Database error: ${error.message}`);
        console.error('Supabase error:', error);
      } else {
        showNotification('success', 'Survey submitted successfully! Thank you for your feedback.');
        setShowShareCard(true);
      }
    } catch (err) {
      showNotification('error', 'An unexpected error occurred. Please try again.');
      console.error('Unexpected error:', err);
    } finally {
      setIsSubmitting(false);
    }
  };
  const router = useRouter();
  const [step, setStep] = useState<number>(0);
  const [answers, setAnswers] = useState<{[key: string]: string | string[] | undefined}>({});
  // Removed unused showDiscord state
  // Discord popup state removed

  const current = questions[step];
  const isAnswered = useMemo(() => {
    if (current.type === 'discord') return true;
    const val = answers[current?.name];
    return val !== undefined && val !== '';
  }, [answers, current]);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setAnswers(prev => ({ ...prev, [name]: value }));
  };

  return (
  <section className="relative flex flex-col items-center justify-center min-h-screen px-2 py-4 sm:px-4 sm:py-8" style={{backgroundImage: 'url(/bg.svg)', backgroundSize: 'cover', backgroundRepeat: 'no-repeat', backgroundPosition: 'center', paddingBottom: '140px', paddingTop: '80px'}}>
    {/* Flash Notification */}
    {notification && (
      <div className={`fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg font-press-start text-xs transition-all duration-300 ${
        notification.type === 'success'
          ? 'bg-green-600 text-white border-2 border-green-800'
          : 'bg-red-600 text-white border-2 border-red-800'
      }`}>
        <div className="flex items-center justify-between">
          <span>{notification.message}</span>
          <button
            onClick={() => setNotification(null)}
            className="ml-3 text-white hover:text-gray-200 font-bold"
          >
            √ó
          </button>
        </div>
      </div>
    )}

    {/* Logo in top-left corner */}
    <div className="absolute top-0 left-0 z-20 p-2 sm:p-4">
       <button
         aria-label="Go to Home Hero Section"
         onClick={() => router.push('/')}
         style={{ background: 'none', border: 'none', boxShadow: 'none', padding: 0, cursor: 'pointer' }}
       >
         <Image src="/logo.svg" alt="OriginForge Logo" width={64} height={64} className="w-12 h-12 sm:w-16 sm:h-16 object-contain cursor-pointer" priority />
       </button>
    </div>
  <div className="w-full max-w-md mx-auto relative z-30" style={{ maxHeight: 'calc(100vh - 220px)', /* keep content above grass and logo */ display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', marginTop: '40px' }}>
      <form
        className="p-0 w-full flex flex-col gap-4 text-[0.85rem] sm:text-[1rem]"
        style={{
          backgroundImage: 'url(/form.png)',
          backgroundSize: 'cover',
          backgroundPosition: 'center',
          backgroundRepeat: 'no-repeat',
          borderRadius: '1rem',
          minHeight: '480px',
          maxHeight: 'calc(100vh - 180px)',
          overflowY: 'auto',
          justifyContent: 'flex-start',
          paddingBottom: '24px',
          paddingTop: '8px',
        }}
        onSubmit={e => e.preventDefault()}
      >
        {/* Single Question Card */}
        <div className="flex flex-col gap-3">
          {/* Show label for all non-share card states */}
          {(!showShareCard || current.type !== 'email') && current.label && (
            <div className="font-press-start text-xs sm:text-sm md:text-base text-yellow-700 mb-3 drop-shadow pt-2 px-2" style={{ whiteSpace: 'normal', wordBreak: 'break-word', overflowWrap: 'break-word', textAlign: 'center', fontFamily: 'var(--font-press-start)', lineHeight: '1.4' }}>{current.label}</div>
          )}
          {current.type === 'email' && !showShareCard && (
            <div className="w-full px-4 sm:px-6">
              <input
                type="email"
                name={current.name}
                className="p-4 border-2 border-yellow-300 rounded-xl bg-white text-yellow-900 focus:border-yellow-600 font-press-start text-sm sm:text-base w-full"
                required
                placeholder="your@email.com"
                value={answers[current.name] || ''}
                onChange={handleChange}
              />
            </div>
          )}
          {current.type === 'email' && showShareCard && (
            <div className="font-press-start text-sm sm:text-base text-yellow-700 mb-3 drop-shadow text-center px-2" style={{ lineHeight: '1.6' }}>
              No emails here, just good vibes and epic loot!
            </div>
          )}
          {current.type === 'radio' && current.options && (
            <div className="flex flex-col gap-1 px-2 sm:px-4">
              {current.options.map(opt => {
                const checked = answers[current.name] === opt;
                return (
                  <label key={opt} className="flex items-center gap-2 px-2 sm:px-3 py-2 rounded border border-amber-900 hover:bg-amber-700 cursor-pointer text-white font-press-start" style={{ minHeight: '40px', fontSize: 'clamp(0.65rem, 2.5vw, 0.9rem)', backgroundColor: '#D0941C', lineHeight: '1.3' }}>
                    <input
                      type="radio"
                      name={current.name}
                      value={opt}
                      checked={checked}
                      onChange={handleChange}
                      style={{ display: 'none' }}
                    />
                    <span style={{ width: '32px', height: '28px', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', pointerEvents: 'none' }}>
                      {checked ? <CheckboxOn /> : <CheckboxOff />}
                    </span>
                    {opt}
                  </label>
                );
              })}
            </div>
          )}
          {current.type === 'checkbox' && current.options && (
            <div className="flex flex-col gap-2 px-4">
              {current.options.map(opt => {
                const checked = Array.isArray(answers[current.name]) && answers[current.name]?.includes(opt);
                return (
                  <label key={opt} className="flex items-center gap-2 px-2 sm:px-3 py-2 rounded border border-amber-900 hover:bg-amber-700 cursor-pointer text-white font-press-start" style={{ minHeight: '40px', fontSize: 'clamp(0.65rem, 2.5vw, 0.9rem)', backgroundColor: '#D0941C', lineHeight: '1.3' }}>
                    <input
                      type="checkbox"
                      name={current.name}
                      value={opt}
                      checked={checked}
                      onChange={handleChange}
                      style={{ display: 'none' }}
                    />
                    <span style={{ width: '32px', height: '28px', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', pointerEvents: 'none' }}>
                      {checked ? <RadioOn /> : <RadioOff />}
                    </span>
                    {opt}
                  </label>
                );
              })}
            </div>
          )}
          {current.type === 'discord' && (
            <div className="flex flex-col items-center justify-center py-12">
              <div className="mb-6 text-center font-press-start text-yellow-700 text-base sm:text-lg">Ready to level up your social XP? Our Discord is where the real loot drops!</div>
              <button type="button" className="pixel-button bg-blue-600 text-white px-8 py-4 rounded shadow text-lg font-press-start" onClick={() => window.open('https://discord.gg/rVHBqhJvpX', '_blank')}>Join Discord</button>
            </div>
          )}
        </div>
        {/* Navigation Arrows */}
        {current.type !== 'discord' && (
          showShareCard ? (
            <>
              <div className="flex flex-col gap-4 items-center justify-center mt-4 mb-4">
                <ShareTwitterButton
                  onClick={() => {
                    // Array of 3 different tweet options
                    const tweetOptions = [
                      'Just discovered @0xoriginforge at @token2049 Singapore - they\'re building the future of gaming identity with DID-based OAuth! üéÆ‚õìÔ∏è\nOne login across ALL games + AI-powered insights + blockchain ownership = gaming finally done right\nWeb3 Foundation backed | Built on @Polkadot üöÄ\n#Token2049 #Web3Gaming #DID #GamingInfrastructure #Polkadot #Singapore',
                      'Met the @0xoriginforge team at @token2049! They\'re solving the fragmented gaming identity problem with decentralized IDs üîê\nNo more juggling multiple accounts. Your gaming identity, your data, your control üí™\nBuilt by @Polkadot Academy grads with Web3 Foundation grant ‚ú®\n#Token2049 #DecentralizedIdentity #Web3 #GamingWeb3 #BlockchainGaming #Singapore',
                      'üéÆ Gaming + Blockchain done RIGHT!\n@0xoriginforge at @token2049 is building DID OAuth for games - unified login, cross-game reputation, AI insights, all on-chain\nFinally, gamers OWN their identity & achievements üî•\nBuilt on @Polkadot substrate!\n#Token2049 #DID #Web3Gaming #Polkadot #DecentralizedGaming #Singapore #GameFi'
                    ];

                    // Randomly select one tweet
                    const randomTweet = tweetOptions[Math.floor(Math.random() * tweetOptions.length)];
                    const tweetText = encodeURIComponent(randomTweet);
                    window.open(`https://twitter.com/intent/tweet?text=${tweetText}`, '_blank');
                  }}
                  className="w-full max-w-xs"
                />
                <JoinDiscordButton
                  onClick={() => window.open('https://discord.gg/rVHBqhJvpX', '_blank')}
                  className="w-full max-w-xs"
                />
              </div>
              <div className="bg-[#FFE5B4] border-4 border-[#FFD700] p-3 sm:p-4 mb-4 mx-4 shadow-lg rounded-lg">
                <p className="text-xs sm:text-sm text-[#8B4513] font-bold font-press-start mb-2" style={{ lineHeight: '1.5' }}>
                  üéÅ HOW TO EARN GOODIES ??
                </p>
                <p className="text-xs text-black font-press-start" style={{ lineHeight: '1.5' }}>
                  Post about us on X and join our discord to collect goodies from us!!
                </p>
              </div>
            </>
          ) : (
            <div className="flex justify-between mt-4 pb-4">
              {step === 0 ? (
                <BackButton
                  onClick={() => router.push('/')}
                  className="mx-4"
                />
              ) : (
                <PreviousButton
                  onClick={() => setStep(s => Math.max(0, s-1))}
                  className="mx-4"
                />
              )}
              {step === questions.length - 2 ? (
                <SubmitButton
                  onClick={submitSurvey}
                  disabled={!isAnswered || isSubmitting}
                  isLoading={isSubmitting}
                  className={`mx-4 ${isSubmitting ? 'opacity-50 cursor-not-allowed' : ''}`}
                />
              ) : (
                <NextButton
                  onClick={() => {
                    setStep(s => Math.min(questions.length-1, s+1));
                  }}
                  disabled={!isAnswered || step === questions.length-1}
                  className="mx-4"
                />
              )}
            </div>
          )
        )}
      </form>
    </div>
  </section>
  );
};

export default SurveySection;
